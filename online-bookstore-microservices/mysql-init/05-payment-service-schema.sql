-- Payment Service Database Schema and Sample Data

USE payment_service_db;

-- Create payments table
CREATE TABLE IF NOT EXISTS payments (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    order_id BIGINT NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    method VARCHAR(50) NOT NULL,
    status VARCHAR(50) NOT NULL DEFAULT 'PENDING',
    transaction_id VARCHAR(100),
    payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_order_id (order_id),
    INDEX idx_status (status),
    INDEX idx_payment_date (payment_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Insert sample payments data
INSERT INTO payments (order_id, amount, method, status, transaction_id, payment_date) VALUES
(1, 25.98, 'CREDIT_CARD', 'SUCCESSFUL', 'TXN-20240115-001', '2024-01-15 10:31:00'),
(2, 13.99, 'DEBIT_CARD', 'SUCCESSFUL', 'TXN-20240115-002', '2024-01-15 10:36:00'),
(3, 14.99, 'UPI', 'SUCCESSFUL', 'TXN-20240116-001', '2024-01-16 14:21:00'),
(4, 31.98, 'CREDIT_CARD', 'SUCCESSFUL', 'TXN-20240116-002', '2024-01-16 14:26:00'),
(5, 44.97, 'PAYPAL', 'SUCCESSFUL', 'TXN-20240117-001', '2024-01-17 09:16:00'),
(6, 11.99, 'CREDIT_CARD', 'PENDING', 'TXN-20240118-001', '2024-01-18 11:01:00'),
(7, 24.98, 'DEBIT_CARD', 'PENDING', 'TXN-20240118-002', '2024-01-18 11:06:00'),
(8, 10.99, 'UPI', 'SUCCESSFUL', 'TXN-20240119-001', '2024-01-19 16:46:00'),
(9, 13.49, 'CREDIT_CARD', 'PROCESSING', 'TXN-20240120-001', '2024-01-20 08:31:00'),
(10, 33.98, 'PAYPAL', 'SUCCESSFUL', 'TXN-20240121-001', '2024-01-21 13:21:00'),
(11, 19.99, 'CREDIT_CARD', 'SUCCESSFUL', 'TXN-20240122-001', '2024-01-22 15:11:00'),
(12, 11.99, 'DEBIT_CARD', 'REFUNDED', 'TXN-20240123-001', '2024-01-23 10:01:00'),
(13, 25.98, 'UPI', 'SUCCESSFUL', 'TXN-20240124-001', '2024-01-24 12:31:00'),
(14, 13.99, 'CREDIT_CARD', 'PROCESSING', 'TXN-20240125-001', '2024-01-25 14:01:00'),
(15, 17.99, 'PAYPAL', 'PENDING', 'TXN-20240126-001', '2024-01-26 09:46:00');

